# 12.Blin-Phong光照模型
冯氏光照模型已经能够很好的模拟真实光照了，性能也很好。但是在某些场景下任然有缺陷。例如：上一节介绍到的镜面高光（镜面反射）， 在高光边缘的位置，由于观察向量和反射向量夹角大于90°时，余弦值小于0，此时镜面高光分子系数就会用0来代替。所以高光边缘以及外部就没有镜面光照分量了。如果反光度越小，镜面高光区域就越大，那么高光区域边缘部位就越大，就会产生一种较大的亮度差。反之反光度越小，这个问题就会越不明显。
 Blin Phong 光照模型就可以解决这个问题，这种模型不再直接使用反射向量计算，而是采用半程向量。
半程向量是视线和反射光之间夹角的一半方向上的单位向量。
使用**半程向量和法向量之间**的夹角余弦值来表示**镜面高光因子**，半程向量和法向量之间的夹角越小，镜面高光分量越大。
## 视线BLin Phong光照
基本的步骤和冯氏光照模型的差不多，需要半程向量。
半程向量 = 人眼视线方向向量（观察向量） + 反射向量
然后将结果归一化。只需要改这一处即可！

- 首先需要求出反射光向量和人眼视线方向向量。
   - GLSL 内置了反射向量算法reflect(inVec, normal)，其中 inVec 为入射向量，方向由光源指向入射点，normal 为入射点的法向量。
      - inVec = 入射点位置 - 光源位置
   - 人眼视线方向向量 = 观察者坐标 - 入射点位置
- 计算半程向量
   - 反射向量 + 人眼视线方向向量
- 归一化半程向量
- 求出半程向量和法向量的点积，得到镜面高光因子。
- 反光度
   - 约束光圈的大小，一个物体的反光度越大，反光率就越强，散射的光就越少，看到的高光面积就越小
   - 最终的高光因子 = 前一步求得的高光因子 * （2 的反光度次幂）
- 将上一步求出的高光因子乘以光线颜色，得到镜面高光分量。
